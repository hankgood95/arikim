<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>카테고리 · 김아리의 노란 하루</title>
  <link rel="stylesheet" href="css/common.css">
  <link rel="stylesheet" href="css/category.css">
</head>
<body>
  <header>
    <h1>🌼 김아리의 노란 하루</h1>
    <button id="darkToggle" onclick="toggleDark()">🌙</button>
    <p>따뜻한 노란빛 속에 하루를 기록해요 💛</p>
  </header>

  <nav>
    <button onclick="location.href='index.html'">🏠 홈</button>
    <button onclick="location.href='write.html'">✏️ 글쓰기</button>
    <button onclick="location.href='category.html?cat=broadcast'">🎤 방송부</button>
    <button onclick="location.href='category.html?cat=cute'">🐾 귀여운 것들</button>
    <button onclick="location.href='category.html?cat=school'">🏫 학교 생활</button>
    <button onclick="location.href='category.html?cat=daily'">💭 하루 기록</button>
  </nav>

  <main>
    <section id="categoryView">
      <h2 id="categoryTitle"></h2>
      <div class="sort-box">
        <select id="sortSelect" onchange="renderList()">
          <option value="latest">최신순</option>
          <option value="oldest">오래된순</option>
          <option value="likes">좋아요순</option>
        </select>
      </div>

      <div id="postList"></div>

      <div id="viewPost" style="display:none;">
        <h3 id="viewTitle"></h3>
        <p class="date-text" id="viewDate"></p>
        <p id="viewContent"></p>
        <img id="viewImage" class="preview" alt="">
        <br>
        <button class="like-btn" id="likeBtn" onclick="toggleLike()">❤️ 좋아요 (<span id="likeCount">0</span>)</button>
        <br>
        <button class="btn" onclick="requestEdit()">✏️ 수정</button>
        <button class="btn" onclick="requestDelete()">🗑️ 삭제</button>
        <button class="btn" onclick="backToList()">목록으로</button>

        <!-- 💬 댓글 -->
        <div class="comments">
          <h4>💬 댓글</h4>
          <div id="commentList"></div>
          <div class="comment-form">
            <div class="row">
              <input id="commentName" placeholder="이름 (비워도 됨)" style="max-width:280px">
              <label><input type="checkbox" id="anonymous"> 익명으로 쓰기</label>
            </div>
            <textarea id="commentText" placeholder="댓글을 입력하세요"></textarea>
            <div class="row">
              <button class="btn" onclick="addComment()">댓글 등록</button>
              <span class="muted">이름을 비워두거나 '익명으로 쓰기'를 체크하면 "익명"으로 등록돼요.</span>
            </div>
          </div>
        </div>
      </div>
    </section>
  </main>

  <!-- 수정 팝업 -->
  <div id="popup" class="popup" style="display:none;">
    <div class="card" style="max-width:520px; width:92%;">
      <h3>✏️ 글 수정</h3>
      <input id="editTitle">
      <textarea id="editContent"></textarea>
      <label for="editPin" style="display:flex; align-items:center; gap:6px; justify-content:center; cursor:pointer; font-weight:600; margin:8px 0;">
        📌 고정하기
        <input type="checkbox" id="editPin" style="transform:scale(1.15); cursor:pointer;">
      </label>
      <input type="file" id="editImageInput" accept="image/*">
      <img id="editPreview" class="preview" alt="">
      <br>
      <button class="btn" onclick="saveEdit()">저장</button>
      <button class="btn" onclick="closePopup()">닫기</button>
    </div>
  </div>

  <script src="js/common.js"></script>
  <script src="js/category.js"></script>
</body>
</html>